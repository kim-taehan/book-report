
# JPA 소개 
- 자바 애플리케이션을 개발하면 MyBatis, JdbcTemplate 같은 SQL mapper 를 사용하여 데이터베이스를 관리한다. 
- 실무에서는 테이블 설계는 열심히 하면서 객체 모델링은 하지 않는다. 
- 객체와 관계형 데이터베이스 간의 차이를 중간에서 해결해주는 ORM(Object Relational Mapping) 프레임워크
- 애플리케이션을 SQL이 아닌 객체 중심으로 개발하니 생산성과 유지보수가 확연히 좋아졌고 테스트를 작성하기도 편리해진 점이다. 

## 1.1 SQL을 직접 다룰 떄 발생하는 문제점 
### 1.1.1 반복, 반복 그리고 반복 
- 객체를 데이터베이스에 CRUD 하려면 너무 많은 SQL과 JDBC API를 코드로 작성해야 된다. 
- 테이블이 100개라면 100번 이상을 반복하게 된다. 

### 1.1.2 SQL에 의존하는 개발 
- 진정한 의미의 계층 분할이 어렵다
- 엔티티를 신뢰할 수 없다
- Sql에 의존적인 개발을 피하기 어렵다

### 1.1.3 JAP와 문제 해결
```java
class JpaClass {
    
    void testMethod() {
        // 저장 기능
        jpa.persist(member);
        
        // 조회 기능 
        String memberId = "helloId";
        Member member = jpa.find(Member.class, memberId);
        
        // 수정 기능
        member.setName("이름변경");
        
        // 연관된 객체 조회
        Team team = member.getTeam();
    }
}
```

## 1.2 패러다임의 불일치
- 객체지향 프로그래밍은 추상화, 캡슐화, 정보은닉, 상속, 다형성 등 시스템 복잡성을 제어할 수 있는 다양한 장치를 제공한다. 
- 객체와 관계형 데이터베이스는 지향하는 목적이 서로 다르므로 둘의 기능과 표현 방법도 다르다. 

### 1.2.1 상속
- 테이블은 상속이라는 기능이 없고 슈퍼타입 서브타입 관계를 사용하면 객체 상속과 유사한 형태로 테이블 설계가 가능하다.
- JDBC API를 사용해서 이러한 관계를 처리하려면 부모, 자식 객체를 각각 꺼내서 SQL을 작성해야 핟ㄴ다.

### 1.2.2 연관관계
- 객체는 참조를 사용해 다른 객체와 연관관계를 가지고 참조에 접근해서 연관된 객체를 조회한다.
- 테이블은 왜래 키를 사용해서 다른 테이블과 연관관계를 가지고 조인을 사용해서 테이블을 조회한다. 
- 객체 모델은 왜래 키가 필요없고 참조만 필요하고 테이블은 반대라서 개발자가 중간에서 변환 역할을 해야 한다. 

### 1.2.3 객체 그래프 탐색 
- SQL을 직접 다루면 처음 실행하는 SQL에 따라 객체 그래프를 어디까지 참색할 수 있는 정해진다. 
- JPA에서는 지연로딩이라는 기술을 통해 실제 객체를 사용하는 시점까지 데이터베이스 조회를 미룰 수 있다. 
- JPA는 연관된 객체를 즉시 조회할지 아니면 지연로딩을 사용할 지 정의할 수 있다. 

### 1.2.4 비교 
- 객체는 동일성 비교와 동등성 비교라는 2가지 방법으로 비교한다. 
  - 동일성 비교는 == 비교로 객체 인스턴스 주소값을 비교
  - 동등성 비교는 equals() 메소드를 사용한 객체 내부 값을 비교
- JPA에서는 같은 트랜잭션일 떄 같은 객체가 조회되는 것을 보장한다. 

## 1.3 JPA란 무엇인가
- JPA 는 자바 진영의 ORM 기술 표준이다. 애플리케이션과 JDBC 사이에서 동작한다.
- ORM은 객체와 관계형 테이터베이스를 매핑한다는 뜻이다. 객체와 테이블을 매핑해서 패러다임 불일치 문제를 해결해준다. 

### 1.3.1 JPA 소개 
- JPA는 자바 ORM 기술에 대한 API 표준 명세다. (인터페이스 모음으로 하이버네이트 기반으로 기술표준을 만듬)
- JPA를 사용하려면 JPA를 구현한 ORM 프레임워크인 하이버네이트를 사용해야 한다.

### 1.3.2 왜 JPA를 사용해야 하는가?
- 생산성: 자바 컬렉션에 객체를 저장하든 JPA에서 저장할 객체를 전달하면 된다. (SQL 작성을 대신 해줌)
- 유지보수: 필드 추가하거나 삭제해도 수정할 코드가 줄어든다.
- 패러다임 불일치 해결
- 성능: 재사용을 통해 성능을 높일 수 있다. 
- 데이터 접근 추상화와 벤더 독립성 
- 표준: ORM 기술 표준으로 다른 구현 기술로 변경할 수 있다. 



